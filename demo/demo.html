<!DOCTYPE html>
<!--
  ~ /*
  ~  Copyright 2016 Yann Massard (https://github.com/yamass) and other contributors
  ~
  ~  Licensed under the Apache License, Version 2.0 (the "License");
  ~  you may not use this file except in compliance with the License.
  ~  You may obtain a copy of the License at
  ~
  ~  http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~  Unless required by applicable law or agreed to in writing, software
  ~  distributed under the License is distributed on an "AS IS" BASIS,
  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~  See the License for the specific language governing permissions and
  ~  limitations under the License.
  ~  */
  -->

<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no">
    <meta charset="UTF-8">

    <link rel="stylesheet" href="css/demo.css">

    <script src="../bower_components/jquery/dist/jquery.js"></script>
    <script src="../bower_components/jquery-ui/ui/version.js"></script>
    <script src="../bower_components/jquery-ui/ui/position.js"></script>
    <script src="../bower_components/mustache/mustache.js"></script>
    <script src="../bower_components/levenshtein/lib/levenshtein.js"></script>
    <script src="../bower_components/moment/moment.js"></script>
    <script src="../bower_components/moment-timezone/builds/moment-timezone-with-data-2010-2020.min.js"></script>
    <script src="../dist/js/single/TrivialCore.js"></script>
    <script src="../dist/js/single/trivial-highlight.js"></script>
    <script src="../dist/js/single/TrivialEvent.js"></script>
    <script src="../dist/js/single/KeyCodes.js"></script>
    <script src="../dist/js/single/TrivialDateSuggestionEngine.js"></script>
    <script src="../dist/js/single/TrivialTimeSuggestionEngine.js"></script>
    <script src="../dist/js/single/TrivialComboBox.js"></script>
    <script src="../dist/js/single/TrivialListBox.js"></script>
    <script src="../dist/js/single/TrivialTagComboBox.js"></script>
    <script src="../dist/js/single/TrivialTreeBox.js"></script>
    <script src="../dist/js/single/TrivialTreeComboBox.js"></script>
    <script src="../dist/js/single/TrivialTree.js"></script>
    <script src="../dist/js/single/TrivialUnitBox.js"></script>
    <script src="../dist/js/single/TrivialCalendarBox.js"></script>
    <script src="../dist/js/single/TrivialDateTimeField.js"></script>
    <script src="demo.js"></script>
</head>
<body>

<form>

<div style="width: 400px">
    <h5>Default query implementation:</h5>
    <small>Configured entries are filtered locally.</small>
    <input id="defaultFilteringComboBox">
    <small>allowFreeText: true</small>
    <input id="freeTextComboBox">
    <small>autoComplete: false</small>
    <input id="noAutoCompleteComboBox">

    <h5>Icon single line template</h5>
    <input id="iconSingleLineComboBox">

    <h5>Custom filtering:</h5>
    <small>Filtering is done by custom code, e.g. on the server side.</small>
    <input id="customFilteringComboBox">

    <h5>valueFunction = additionalInfo</h5>
    <input id="valueFunctionComboBox">

    <h5>No trigger</h5>
    <input id="noTriggerComboBox" tabindex="12">

    <h5>showDropDownOnResults = true</h5>
    <input id="showDropDownOnResultsOnlyComboBox">

    <h5>disabled and readonly</h5>
    <input id="disabledComboBox">
    <input id="readonlyComboBox">
</div>


<h4>ListBox</h4>

<div id="listBox">

</div>

<h4>Trivial Tagbox</h4>

<div style="width: 600px;">
    <input id="zeroConfigTagBox">
</div>
<h5>Custom Template</h5>

<div style="width: 600px;">
    <input id="customTemplateTagBox1">
</div>
<h5>Custom Tag Wrapper Template</h5>

<div style="width: 600px;">
    <input id="customTemplateTagBox2" placeholder="placeholder defined on input field...">
</div>

<h5>maxSelectedEntries</h5>
<div style="width: 600px;">
    <input id="maxSelectedEntriesTagBox" tabindex="11">
</div>

<h5>no dropdown</h5>
<div style="width: 600px;">
    <input id="noDropdownTagBox">
</div>

<h5>showDropDownOnResults = true</h5>
<div style="width: 600px;">
    <input id="showDropDownOnResultsOnlyTagBox">
</div>

<h5>disabled and reaonly</h5>
<div style="width: 600px;">
    <input id="disabledTagBox">
</div>
<div style="width: 600px;">
    <input id="readonlyTagBox">
</div>

<h4>Trivial TreeBox</h4>

<div id="treeBoxContainer" style="border: 1px solid black;"></div>

<h4>Trivial TreeBox with special settings</h4>
<div id="singleSelectionTreeBoxContainer" style="border: 1px solid black;"></div>

<h4>Trivial TreeComboBox</h4>

<div style="width: 350px">
    <input id="treeComboBox">
</div>
<h5>freeText...</h5>
<div style="width: 350px">
    <input id="freeTextTreeComboBox">
</div>
<div style="width: 350px">
    <input id="disabledTreeComboBox">
</div>
<div style="width: 350px">
    <input id="readonlyTreeComboBox">
</div>
<small>lazy child loading</small>
<div style="width: 350px">
   <input id="lazyChildLoadingTreeComboBox">
</div>

<h4>Trivial Tree</h4>
search field always visible:
<div style="width: 350px; height: 370px">
    <input id="zeroConfigTree" tabindex="15" placeholder="Search here...">
</div>
on demand search field:
<div style="width: 350px; height: 370px">
    <input id="onDemandSearchFieldTree">
</div>
no search field:
<div style="width: 350px; height: 370px">
    <input id="noSearchFieldTree">
</div>

<div style="width: 300px">
    <h3>TrivialUnitBox</h3>
    <input id="unitBox">
    <h5>unitDisplayPosition: 'left'</h5>
    <input id="unitBoxLeft">
    <h5>long single line template:</h5>
    <input id="unitBoxSingleLineTemplate">
    <h5>readonly:</h5>
    <input id="readonlyUnitBox">
    <h5>disbabled:</h5>
    <input id="disabledUnitBox">
</div>

<div style="width: 300px">
    <h3>dateTimeField</h3>
    <div id="dateTimeField"></div>
</div>

<div style="width: 300px">
    <h3>CalendarBox</h3>
    <div id="calendarBox"></div>
</div>


    <input type="submit" value="submit">
    <input id="destroyAllButton" type="button" value="call destroy() on all (except the internal components)">

</form>

<script>
    $(function () {

        window.demo = {};

        demo.defaultFilteringCombobox = new TrivialComponents.TrivialComboBox("#defaultFilteringComboBox", {
            entries: createEntries(),
            showClearButton: true
        });
        demo.defaultFilteringCombobox.onSelectedEntryChanged.addListener(function(entry) {
            console.log("defaultFilteringCombobox onSelectedEntryChanged " + (entry ? entry.displayValue : "null"))
        });
        demo.defaultFilteringCombobox.onFocus.addListener(function() {
            console.log("defaultFilteringCombobox focus");
        });
        demo.defaultFilteringCombobox.onBlur.addListener(function() {
            console.log("defaultFilteringCombobox blur");
        });

        demo.freeTextComboBox = new TrivialComponents.TrivialComboBox('#freeTextComboBox', {
            entries: createEntries(),
            allowFreeText: true
        });
        demo.freeTextComboBox.onSelectedEntryChanged.addListener(function(entry) {
            console.log("freeTextComboBox onSelectedEntryChanged " + (entry ? entry.displayValue : "null"))
        });

        demo.noAutoCompleteComboBox = new TrivialComponents.TrivialComboBox('#noAutoCompleteComboBox', {
            entries: createEntries(),
            autoComplete: false
        });

        demo.iconSingleLineComboBox = new TrivialComponents.TrivialComboBox('#iconSingleLineComboBox', {
            entries: createEntries(),
            template: TrivialComponents.iconSingleLineTemplate
        });

        demo.customFilteringComboBox = new TrivialComponents.TrivialComboBox('#customFilteringComboBox', {
            entries: createEntries(),
            queryFunction: function (queryString, resultCallback) {
                setTimeout(function () {
                    resultCallback(createEntries().filter(function (entry) {
                        return entry.displayValue.toLowerCase().indexOf(queryString.toLowerCase()) != -1 || entry.additionalInfo.toLowerCase().indexOf(queryString.toLowerCase()) != -1;
                    }));
                }, 500);
            },
            selectedEntryTemplate: TrivialComponents.singleLineTemplate
        });

        demo.valueFunctionComboBox = new TrivialComponents.TrivialComboBox('#valueFunctionComboBox', {
            entries: createEntries(),
            valueFunction: function(entry) {
                return entry ? entry.additionalInfo : null;
            }
        });

        demo.noTriggerComboBox = new TrivialComponents.TrivialComboBox('#noTriggerComboBox', {
            entries: createEntries(),
            showTrigger: false
        });

        var showDropDownOnResultsOnlyComboBoxEntries = createEntries();
        demo.showDropDownOnResultsOnlyComboBox = new TrivialComponents.TrivialComboBox('#showDropDownOnResultsOnlyComboBox', {
            entries: showDropDownOnResultsOnlyComboBoxEntries,
            queryFunction: function (queryString, resultCallback) {
                setTimeout(function () {
                    resultCallback(showDropDownOnResultsOnlyComboBoxEntries.filter(function (entry) {
                        return entry.displayValue.toLowerCase().indexOf(queryString.toLowerCase()) != -1 || entry.additionalInfo.toLowerCase().indexOf(queryString.toLowerCase()) != -1;
                    }));
                }, 500);
            },
            showDropDownOnResultsOnly: true
        });

        demo.disabledComboBox = new TrivialComponents.TrivialComboBox('#disabledComboBox', {
            selectedEntry: createEntries(1)[0],
            editingMode: 'disabled'
        });

        demo.readonlyComboBox = new TrivialComponents.TrivialComboBox('#readonlyComboBox', {
            selectedEntry: createEntries(1)[0],
            editingMode: 'readonly'
        });

        var listBoxEntries = createEntries(10);
        listBoxEntries[1].template = "<div>custom template for entry {{id}}</div>";
        demo.listBox = new TrivialComponents.TrivialListBox('#listBox', {
            entries: listBoxEntries
        });

        demo.zeroConfigTagBox = new TrivialComponents.TrivialTagComboBox('#zeroConfigTagBox', {
            entries: createEntries()
        });
        demo.zeroConfigTagBox.onSelectedEntryChanged.addListener(function(entries) {
            console.log("zeroConfigTagBox onSelectedEntryChanged " + entries.map(function(e){return e.displayValue}).join(", "))
        });
        demo.zeroConfigTagBox.onFocus.addListener(function() {
            console.log("zeroConfigTagBox focus");
        });
        demo.zeroConfigTagBox.onBlur.addListener(function() {
            console.log("zeroConfigTagBox blur");
        });
        $(demo.zeroConfigTagBox.getMainDomElement()).change(function() {
            console.log("#zeroConfigTagBox change")
        });

        demo.customTemplateTagBox = new TrivialComponents.TrivialTagComboBox('#customTemplateTagBox1', {
            entries: createEntries(),
            selectedEntries: createEntries(2),
            template: TrivialComponents.roundImage2LinesColorBubbleTemplate,
            showTrigger: false
        });

        demo.customTemplateTagBox = new TrivialComponents.TrivialTagComboBox('#customTemplateTagBox2', {
            entries: createEntries(),
            template: TrivialComponents.roundImage2LinesColorBubbleTemplate,
            selectedEntryTemplate: '<div class="tr-tagbox-default-wrapper-template" style="background-color: {{statusColor}}; border: 1px solid {{statusColor}}">' +
            '<div class="tr-tagbox-tag-content">' +
            '   <div class="tr-template-round-image-2-lines-color-bubble">' +
            '     <div class="img-wrapper" style="background-image: url({{imageUrl}})"></div>' +
            '     <div class="content-wrapper tr-editor-area"> ' +
            '       <div class="main-line">{{displayValue}}</div> ' +
            '       <div class="additional-info">{{additionalInfo}}</div>' +
            '     </div>' +
            '   </div>' +
            '</div>' +
            '<div class="tr-remove-button"></div>' +
            '</div>',
            showTrigger: false,
            distinct: false
        });

        demo.maxSelectedEntriesTagBox = new TrivialComponents.TrivialTagComboBox('#maxSelectedEntriesTagBox', {
            entries: createEntries(),
            template: TrivialComponents.roundImage2LinesColorBubbleTemplate,
            maxSelectedEntries: 2,
            allowFreeText: true
        });

        demo.noDropdownTagBox = new TrivialComponents.TrivialTagComboBox('#noDropdownTagBox', {
            template: TrivialComponents.roundImage2LinesColorBubbleTemplate,
            allowFreeText: true,
            showTrigger: false
        });

        var showDropDownOnResultsOnlyTagBoxEntries =  createEntries();
        demo.showDropDownOnResultsOnlyTagBox = new TrivialComponents.TrivialTagComboBox('#showDropDownOnResultsOnlyTagBox', {
            entries: showDropDownOnResultsOnlyTagBoxEntries,
            queryFunction: function (queryString, resultCallback) {
                setTimeout(function () {
                    resultCallback(showDropDownOnResultsOnlyTagBoxEntries.filter(function (entry) {
                        return entry.displayValue.toLowerCase().indexOf(queryString.toLowerCase()) != -1 || entry.additionalInfo.toLowerCase().indexOf(queryString.toLowerCase()) != -1;
                    }));
                }, 500);
            },
            showDropDownOnResultsOnly: true
        });

        demo.disabledTagBox = new TrivialComponents.TrivialTagComboBox('#disabledTagBox', {
            template: TrivialComponents.roundImage2LinesColorBubbleTemplate,
            selectedEntries: createEntries(2),
            editingMode: 'disabled'
        });

        demo.readonlyTagBox = new TrivialComponents.TrivialTagComboBox('#readonlyTagBox', {
            template: TrivialComponents.roundImage2LinesColorBubbleTemplate,
            selectedEntries: createEntries(2),
            editingMode: 'readonly'
        });

        demo.treeBoxContaine = new TrivialComponents.TrivialTreeBox('#treeBoxContainer', {
            templates: [TrivialComponents.icon2LinesTemplate],
            entries: createDemoTreeNodes(),
            selectedEntryId: 2,
            lazyChildrenQueryFunction: function (node, callback) {
                setTimeout(function () {
                    callback(createDemoTreeNodes())
                }, 1000);
            }
        });
        demo.singleSelectionTreeBoxContainer = new TrivialComponents.TrivialTreeBox('#singleSelectionTreeBoxContainer', {
            templates: [TrivialComponents.icon2LinesTemplate],
            entries: createDemoTreeNodes(),
            selectedEntryId: 2,
            lazyChildrenQueryFunction: function (node, callback) {
                setTimeout(function () {
                    callback(createDemoTreeNodes())
                }, 1000);
            },
            showExpanders                 : false,
            openOnSelection               : true,
            enforceSingleExpandedPath     : true
        });

        var $treeComboBox = $('#treeComboBox');
        demo.treeComboBox = new TrivialComponents.TrivialTreeComboBox($treeComboBox, {
            templates: [TrivialComponents.icon2LinesTemplate],
            entries: createDemoTreeNodes(),
            selectedEntry: createDemoTreeNodes()[0],
            lazyChildrenQueryFunction: function (node, callback) {
                setTimeout(function () {
                    callback(createDemoTreeNodes())
                }, 1000);
            },
            animationDuration: 200,
            showClearButton: true
        });
        demo.treeComboBox.onSelectedEntryChanged.addListener(function(entry) {
            console.log("treeComboBox onSelectedEntryChanged " + (entry ? entry.displayValue : "null"))
        });
        demo.treeComboBox.onFocus.addListener(function() {
            console.log("treeComboBox focus");
        });
        demo.treeComboBox.onBlur.addListener(function() {
            console.log("treeComboBox blur");
        });

        demo.freeTextTreeComboBox = new TrivialComponents.TrivialTreeComboBox('#freeTextTreeComboBox', {
            templates: [TrivialComponents.icon2LinesTemplate],
            entries: createDemoTreeNodes(),
            selectedEntry: createDemoTreeNodes()[0],
            lazyChildrenQueryFunction: function (node, callback) {
                setTimeout(function () {
                    callback(createDemoTreeNodes())
                }, 1000);
            },
            allowFreeText: true,
            animationDuration: 0
        });
        demo.freeTextTreeComboBox.onSelectedEntryChanged.addListener(function(entry) {
            console.log("freeTextTreeComboBox onSelectedEntryChanged " + (entry ? entry.displayValue : "null"))
        });

        demo.disabledTreeComboBox = new TrivialComponents.TrivialTreeComboBox('#disabledTreeComboBox', {
            templates: [TrivialComponents.icon2LinesTemplate],
            entries: createDemoTreeNodes(),
            selectedEntry: createDemoTreeNodes()[1],
            editingMode: 'disabled'
        });

        demo.readonlyTreeComboBox = new TrivialComponents.TrivialTreeComboBox('#readonlyTreeComboBox', {
            templates: [TrivialComponents.icon2LinesTemplate],
            entries: createDemoTreeNodes(),
            selectedEntry: createDemoTreeNodes()[2],
            editingMode: 'readonly'
        });

        demo.lazyChildLoadingTreeComboBox =  new TrivialComponents.TrivialTreeComboBox('#lazyChildLoadingTreeComboBox', {
            templates: [TrivialComponents.icon2LinesTemplate],
            entries: createDemoTreeNodes(),
            lazyChildrenQueryFunction: function (node, callback) {
               setTimeout(function () {
                  callback(createDemoTreeNodes())
               }, 1000);
            },
            animationDuration: 200
        });
        demo.lazyChildLoadingTreeComboBox.onSelectedEntryChanged.addListener(function(entry) {
            console.log("lazyChildLoadingTreeComboBox onSelectedEntryChanged " + (entry ? entry.displayValue : "null"))
        });

        demo.zeroConfigTree = new TrivialComponents.TrivialTree('#zeroConfigTree', {
            templates: [TrivialComponents.icon2LinesTemplate],
            entries: createDemoTreeNodes(),
//            selectedEntryId: 2,
            lazyChildrenQueryFunction: function (node, callback) {
                setTimeout(function () {
                    callback(createDemoTreeNodes())
                }, 1000);
            },
            searchBarMode: 'always-visible'
        });
        demo.zeroConfigTree.onSelectedEntryChanged.addListener(function(node) {
            console.log("onSelectedEntryChanged " + (node ? node.id : "null"))
        });
        demo.zeroConfigTree.onNodeExpansionStateChanged.addListener(function(node) {
            console.log("onNodeExpansionStateChanged " + node.id)
        });

        demo.onDemandSearchFieldTree = new TrivialComponents.TrivialTree('#onDemandSearchFieldTree', {
            templates: [TrivialComponents.icon2LinesTemplate],
            entries: createDemoTreeNodes(),
            directSelectionViaArrowKeys: true,
            selectedEntryId: 2,
            lazyChildrenQueryFunction: function (node, callback) {
                setTimeout(function () {
                    callback(createDemoTreeNodes())
                }, 1000);
            },
            showSearchField: false
        });

        demo.noSearchFieldTree = new TrivialComponents.TrivialTree('#noSearchFieldTree', {
            templates: [TrivialComponents.icon2LinesTemplate],
            entries: createDemoTreeNodes(),
            selectedEntryId: 2,
            lazyChildrenQueryFunction: function (node, callback) {
                setTimeout(function () {
                    callback(createDemoTreeNodes())
                }, 1000);
            },
            showSearchField: false,
            searchBarMode: 'none'
        });

        demo.unitBox = new TrivialComponents.TrivialUnitBox('#unitBox', {
            entries: createCurrencyEntries(),
            selectedEntry: {
                code: 'EUR'
            }, decimalPrecision: 3,
            decimalSeparator: ',',
            thousandsSeparator: '.',
            allowNullAmount: true
        });
        demo.unitBox.onChange.addListener(function (data) {
            console.log("trivialUnitBox.amount: " + data.amount);
            console.log("trivialUnitBox.unit: " + data.unit);
        });
        demo.unitBox.onFocus.addListener(function (data) {
        	console.log("unitbox focus");
        });
        demo.unitBox.onBlur.addListener(function (data) {
        	console.log("unitbox blur");
        });
	    demo.unitBox.getEditor().addEventListener("unit box editor keyup", function(e) {console.log("keyup: " + demo.unitBox.getAmount() + " " + demo.unitBox.getSelectedEntry().code)});


        demo.unitBoxLeft = new TrivialComponents.TrivialUnitBox('#unitBoxLeft', {
            entries: createCurrencyEntries(),
            unitDisplayPosition: 'left'
        });
        demo.unitBoxSingleLineTemplate = new TrivialComponents.TrivialUnitBox('#unitBoxSingleLineTemplate', {
            entries: createCurrencyEntries(),
            template: TrivialComponents.currencySingleLineLongTemplate
        });
        demo.readonlyUnitBox = new TrivialComponents.TrivialUnitBox('#readonlyUnitBox', {
            entries: createCurrencyEntries(),
            editingMode: 'readonly',
            amount: 123456789,
            selectedEntry: createCurrencyEntries()[0]
        });
        demo.disabledUnitBox = new TrivialComponents.TrivialUnitBox('#disabledUnitBox', {
            entries: createCurrencyEntries(),
            editingMode: 'disabled',
            amount: 123456789,
            selectedEntry: createCurrencyEntries()[0]
        });

        demo.calendarBox = new TrivialComponents.TrivialCalendarBox('#calendarBox', {
            selectedDate: moment(),
            firstDayOfWeek: 1
        });

        demo.dateTimeField = new TrivialComponents.TrivialDateTimeField('#dateTimeField', {});

        $destroyAllButton = $('#destroyAllButton').click(function() {
            Object.keys(demo).forEach(function(key) {
            	demo[key].destroy();
            })
        });
    });
</script>


</body>
</html>


