/*! Trivial Components | (c) 2015 Yann Massard and others | Apache License, Version 2.0 (https://raw.githubusercontent.com/trivial-components/trivial-components/master/LICENSE) */
!function(e){if("object"==typeof module&&"object"==typeof module.exports){var n=e(require,exports);void 0!==n&&(module.exports=n)}else"function"==typeof define&&define.amd?define(["require","exports","jquery","levenshtein"],e):(window.TrivialComponents=window.TrivialComponents||{},e(function(e){return"jquery"===e?window.jQuery:"levenshtein"===e?window.Levenshtein:"moment"===e?window.moment:"mustache"===e?window.Mustache:window.TrivialComponents},window.TrivialComponents))}(function(e,n){"use strict";function t(e){return'<div class="tr-tagbox-default-wrapper-template"><div class="tr-tagbox-tag-content">##entryHtml##</div><div class="tr-remove-button"></div></div>'.replace("##entryHtml##",e)}function i(e,n){function t(t){for(var i=[],r=0;r<e.length;r++){var a=e[r],s=a._trEntryElement;(!t||d(s.text().trim().replace(/\s{2,}/g," "),t,n).length>0)&&i.push(a)}return i}return function(e,n){n(t(e))}}function r(e){var n=function(){};n.prototype=e;var t=n;return new t}function a(e,n){return function(t,i,r){return e.some(function(e){var r=t[e];return null!=r&&d(r.toString(),i,n).length>0})}}function s(e,n,t,i){function a(e,s,l){var o=r(e);if(o[t]=[],o[i]=!1,e[t])for(var c=0;c<e[t].length;c++){var d=e[t][c],u=a(d,s,l+1);u&&(o[t].push(u),o[i]=!0)}var p=o[t].length>0,v=n(e,s,l);return v&&!p&&(o[t]=e[t]),v||p?o:null}return function(n,t){if(n){for(var i=[],r=0;r<e.length;r++){var s=e[r],l=a(s,n,0);l&&i.push(l)}t(i)}else t(e)}}function l(e,n,t,i){function a(e,s,l){var o=r(e);if(o[n]=[],o[t]=!1,e[n])for(var c=0;c<e[n].length;c++){var d=e[n][c],u=a(d,s,l+1);u&&(o[n].push(u),o[t]=!0)}var p=o[n].length>0,v=i(e,s,l);return v&&!p&&(o[n]=e[n]),v||p?o:null}return function(n,t){if(n){for(var i=[],r=0;r<e.length;r++){var s=e[r],l=a(s,n,0);l&&i.push(l)}t(i)}else t(e)}}function o(e,n,t){e=e.firstChild||e,t=t||n;var i=document.createRange();i.setStart(e,n),i.setEnd(e,t);var r=window.getSelection();try{r.removeAllRanges()}catch(e){}r.addRange(i)}function c(e,n){if(null===e||void 0===e||null===n||void 0===n)return e===n;if(e.constructor!==n.constructor)return!1;if(e instanceof Function)return e===n;if(e instanceof RegExp)return e===n;if(e===n||e.valueOf()===n.valueOf())return!0;if(Array.isArray(e)&&e.length!==n.length)return!1;if(e instanceof Date)return!1;if(!(e instanceof Object))return!1;if(!(n instanceof Object))return!1;var t=Object.keys(e);return Object.keys(n).every(function(e){return t.indexOf(e)!==-1})&&t.every(function(t){return c(e[t],n[t])})}function d(e,n,t){function i(n){for(var t,i=[];t=n.exec(e);)i.push({start:t.index,length:t[0].length});return i}function r(e,n){var i=new f(e,n);return i.distance<=t.maxLevenshteinDistance?[{start:0,length:n.length,distance:i.distance}]:[]}if(!n)return[{start:0,length:e.length}];if(t=v.extend({matchingMode:"contains",ignoreCase:!0,maxLevenshteinDistance:3},t||null),t.ignoreCase&&(e=e.toLowerCase(),n=n.toLowerCase()),"contains"==t.matchingMode)return n=n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i(new RegExp(n,"g"));if("prefix"==t.matchingMode)return n=n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i(new RegExp("^"+n,"g"));if("prefix-word"==t.matchingMode)return n=n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i(n.charAt(0).match(/^\w/)?new RegExp("\\b"+n,"g"):new RegExp(n,"g"));if("prefix-levenshtein"==t.matchingMode)return r(e.substr(0,Math.min(n.length,e.length)),n);if("levenshtein"==t.matchingMode)return r(e,n);throw"unknown matchingMode: "+t.matchingMode}function u(e,n){var t=v(n);v(e).each(function(){var e=v(this),n=e.scrollTop(),i=n+e.innerHeight(),r=v(t).offset().top-v(this).offset().top+e.scrollTop(),a=r+t.height();r<n?e.scrollTop(r):a>i&&e.scrollTop(Math.min(r,a-e.innerHeight()));var s=e.scrollLeft(),l=s+e.innerWidth(),o=v(t).offset().left-v(this).offset().left+e.scrollLeft(),c=o+t.width();o<s?e.scrollLeft(o):c>l&&e.scrollLeft(Math.min(o,c-e.innerWidth()))})}function p(e,n){return null!=n?window.setTimeout(e(),n):void e()}Object.defineProperty(n,"__esModule",{value:!0});var v=e("jquery"),f=e("levenshtein");n.keyCodes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,caps_lock:20,escape:27,space:32,page_up:33,page_down:34,end:35,home:36,left_arrow:37,up_arrow:38,right_arrow:39,down_arrow:40,insert:45,delete:46,left_window_key:91,right_window_key:92,select_key:93,num_lock:144,scroll_lock:145,specialKeys:[8,9,13,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46,91,92,93,144,145],numberKeys:[48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105],isSpecialKey:function(e){return this.specialKeys.indexOf(e)!=-1},isDigitKey:function(e){return this.numberKeys.indexOf(e)!=-1},isModifierKey:function(e){return[n.keyCodes.shift,n.keyCodes.caps_lock,n.keyCodes.alt,n.keyCodes.ctrl,n.keyCodes.left_window_key,n.keyCodes.right_window_key].indexOf(e.which)!=-1}},n.DEFAULT_TEMPLATES={image2LinesTemplate:'<div class="tr-template-image-2-lines">  <div class="img-wrapper" style="background-image: url({{imageUrl}})"></div>  <div class="content-wrapper tr-editor-area">     <div class="main-line">{{displayValue}}</div>     <div class="additional-info">{{additionalInfo}}</div>  </div></div>',roundImage2LinesColorBubbleTemplate:'<div class="tr-template-round-image-2-lines-color-bubble">  {{#imageUrl}}<div class="img-wrapper" style="background-image: url({{imageUrl}})"></div>{{/imageUrl}}  <div class="content-wrapper tr-editor-area">     <div class="main-line">{{displayValue}}</div>     <div class="additional-info">{{#statusColor}}<span class="status-bubble" style="background-color: {{statusColor}}"></span>{{/statusColor}}{{additionalInfo}}</div>  </div></div>',icon2LinesTemplate:'<div class="tr-template-icon-2-lines">  <div class="img-wrapper" style="background-image: url({{imageUrl}})"></div>  <div class="content-wrapper tr-editor-area">     <div class="main-line">{{displayValue}}</div>     <div class="additional-info">{{additionalInfo}}</div>  </div></div>',iconSingleLineTemplate:'<div class="tr-template-icon-single-line">  <div class="img-wrapper" style="background-image: url({{imageUrl}})"></div>  <div class="content-wrapper tr-editor-area">{{displayValue}}</div></div>',singleLineTemplate:'<div class="tr-template-single-line">  <div class="content-wrapper tr-editor-area">     <div>{{displayValue}}</div>   </div></div>',currencySingleLineShortTemplate:'<div class="tr-template-currency-single-line-short">  <div class="content-wrapper tr-editor-area">     <div>{{#symbol}}<span class="currency-symbol">{{symbol}}</span>{{/symbol}} {{#code}}<span class="currency-code">{{code}}</span>{{/code}}</div>   </div></div>',currencySingleLineLongTemplate:'<div class="tr-template-currency-single-line-long">  <div class="content-wrapper tr-editor-area">     <div class="symbol-and-code">{{#code}}<span class="currency-code">{{code}}</span>{{/code}} {{#symbol}}<span class="currency-symbol">{{symbol}}</span>{{/symbol}}</div>    <div class="currency-name">{{name}}</div>  </div></div>',currency2LineTemplate:'<div class="tr-template-currency-2-lines">  <div class="content-wrapper tr-editor-area">     <div class="main-line">      <span class="currency-code">{{code}}</span>      <span class="currency-name">{{name}}</span>    </div>     <div class="additional-info">      <span class="currency-symbol">{{symbol}}</span>&nbsp;      {{#exchangeRate}}      <div class="exchange">        =         <span class="exchange-rate">{{exchangeRate}}</span>        <span class="exchange-rate-base">{{exchangeRateBase}}</span>      </div>      {{/exchangeRate}}    </div>  </div></div>',defaultSpinnerTemplate:'<div class="tr-default-spinner"><div class="spinner"></div><div>Fetching data...</div></div>',defaultNoEntriesTemplate:'<div class="tr-default-no-data-display"><div>No matching entries...</div></div>'},n.wrapWithDefaultTagWrapper=t,n.defaultListQueryFunctionFactory=i,n.createProxy=r,n.defaultEntryMatchingFunctionFactory=a,n.defaultTreeQueryFunctionFactory=s,n.customTreeQueryFunctionFactory=l,n.selectElementContents=o,n.escapeSpecialRegexCharacter=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},n.objectEquals=c,n.trivialMatch=d,n.minimallyScrollTo=u,n.setTimeoutOrDoImmediately=p});